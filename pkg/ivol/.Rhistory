fx$USEURSP <- 1/fx$USEURSP
fx$SWISSFR <- 1/fx$SWISSFR
fx$SWEURSP <- 1/fx$SWEURSP
fx$UKEURSP <- 1/fx$UKEURSP
colnames(fx)[2:ncol(fx)] <- c("EUR_US", "UK_US", "CHF_US", "EUR_UK", "UK_CHF", "EUR_CHF")
View(fx)
rfx <- fx; rfx[,2:ncol(rfx)] <- apply(rfx[,2:ncol(rfx)], 2, function(x){diff(log(x))})
rfx <- fx;
apply(rfx[,2:ncol(rfx)], 2, function(x){diff(log(x))})
apply(rfx[,2:ncol(rfx)], 2, function(x){diff(log(x))}) %>% View
rfx <- apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))})
View(rfx)
rfx <- cbind(fx$DATE[2:nrow(fx)], apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))}))
View(rfx)
rfx <- cbind(as.character(fx$DATE[2:nrow(fx)]), apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))})) %>% data.frame
View(rfx)
rfx <- cbind(as.character(fx$DATE[2:nrow(fx)]), apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))})) %>% data.frame; colnames(rfx)[1] <- "DATE"
View(rfx)
rfx <- cbind(as.character(fx$DATE[2:nrow(fx)]), apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))}))
storage.mode(rfx)[,2:ncol(rfx)] <- 'numeric'
rfx <- cbind(as.character(fx$DATE[2:nrow(fx)]), apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))}))
View(rfx)
class(rfx[1,2])
rfx <- apply(fx[,2:ncol(fx)], 2, function(x){diff(log(x))}) %>% data.frame
View(rfx)
rfx <- cbind(rfx[2:nrow(rfx),'DATE', drop=F], rfx)
rfx[2:nrow(rfx),'DATE', drop=F]
rfx <- cbind(fx[2:nrow(fx),'DATE', drop=F], rfx)
View(rfx)
View(inv)
View(pf)
View(inv[-1,])
View(fx[,-1])
rfx <- apply(fx[,-1], 2, function(x){diff(log(x))}) %>% data.frame
rfx <- cbind(fx[-1,'DATE', drop=F], rfx)
View(rfx)
View(pf)
pf <- pf[-1,]
View(inv[1:(nrow(inv)-1),])
View(inv[1:(nrow(inv)-1),-1])
View(inv[1:(nrow(inv)-1),-1]  * rfx[,-1] )
pf$pf <- colSums(inv[1:(nrow(inv)-1),-1]  * rfx[,-1])
colSums(inv[1:(nrow(inv)-1),-1]  * rfx[,-1])
pf$pf <- rowSums(inv[1:(nrow(inv)-1),-1]  * rfx[,-1])
View(pf)
summary(pf$pf * 252)
View(pf)
View(h)
5.521277e-02
pf$p <- c(1, exp(cumsum(pf$pf)))
c(1, exp(cumsum(pf$pf)))
View(c(1, exp(cumsum(pf$pf))))
pf$p <- c(1, exp(cumsum(pf$pf)))[-1]
plot(pf$p)
library(dplyr); library(RDatastream); library(xts); library(reshape2)
user <- list(username = "DS:ZUTI007", password = "PRICE325")
fx <- ds(user, "USEURO.", "ER", fromDate = "1999-01-04")[[7]]
rownames(fx) <- fx$DATE; fx <- fx[,"ER", drop=F]
fx$r.ER <- c(NA, diff(log(fx$ER)))
df <- ds(user, paste0("FVEUR", c("3M", "6M", "9M", "1Y")), fromDate = "1999-01-04")
df <- do.call("rbind", df[7, ])
head(df)
d <- reshape(df[,c("DATE", "SYMBOL", "P")], timevar = "SYMBOL", idvar = "DATE", direction = "wide")
rownames(d) <- d$DATE; d$DATE <- NULL
d <- d/100
tau <- c(90, 180, 270, 360)
h <- d[, 1:3, drop=F]; h[,] <- NA; colnames(h) <- c("fs", "h", "r2")
x <- log(tau)
for(i in 1:nrow(h)){
cat('.')
y <- as.numeric(d[i,]) %>% log
mdl <- lm(y ~ x)
h[i,1:2] <- mdl$coefficients
h[i, 3] <- summary(mdl)$r.squared
}
h$fs <- exp(h$fs)
h$h <- h$h + 0.5
plot(h$r2)
summary(h$r2)
plot(h$h, type='l'); abline(0.5,0)
h$h2 <- h$h^2
t <- 21
fxx <- as.xts(fx)
fxx$r.fwd <- rollsum(fxx$r.ER, t, align = 'left')
lm(fxx$r.fwd ~ h$h) %>% summary
fxx$h <- as.xts(h)$h
fxx$l.h <- lag(fxx$h)
fxx <- na.trim(fxx)
mean(fxx$r.fwd[fxx$l.h > 0.5]) * 252
mean(fxx$r.fwd[fxx$l.h < 0.5]) * 252
fxx$inv <- sign(fxx$l.h-0.5) * (-1)
fxx$pf <- fxx$r.ER * fxx$inv
View(fxx)
fxx$p <- exp(cumsum(fxx$pf))
View(fxx)
plot(fxx$p)
View(fxx)
View(fxx)
fxx$pf %>% lag %>% View
fxx$pfd <- (fxx$inv %>% lag ) * fxx$r.ER
View(fxx)
table(is.na(fxx$pfd))
fxx$pfd[is.na(fxx$pfd)]
fxx$pfd[is.na(fxx$pfd)] <- 0
mean(fxx$pfd)
mean(fxx$pfd) * 252
mean(fxx$r.ER)
mean(fxx$r.ER) * 252
plot(fxx$inv)
table(fxx$inv)
fxx$inv[fxx$inv == 0]
fxx$inv[fxx$inv == 0] <- NA
?na.fill()
?na.locf
fxx$inv <- na.locf(fxx$inv)
fxx$pfd <- lag(fxx$inv) * fxx$r.ER
mean(fxx$pfd)
fxx$pfd <- lag(fxx$inv) * fxx$r.ER; fxx$pfd[is.na(fxx$pfd)] <- 0
mean(fxx$pfd)
mean(fxx$pfd) * 252
user <- list(username = "DS:ZUTI007", password = "PRICE325")
df <- ds(user, "S&#38;PCOMP", "RI", fromDate = "1999-01-04")
df <- df[[7]]
View(df)
user <- list(username = "DS:ZUTI007", password = "PRICE325")
df <- ds(user, "S&#38;PCOMP", "RI", fromDate = "1980-01-04")
df <- df[[7]]
ccy <- ds(user, "USEURSP", "ER", fromDate = "1980-01-01")
ccy <- ccy[[7]]
View(ccy)
View(df)
head(df)
merge(df[,c('DATE', "RI")], ccy[,c("DATE", "ER")], by = "DATE", all=T)
df <- merge(df[,c('DATE', "RI")], ccy[,c("DATE", "ER")], by = "DATE", all=T)
View(df)
df <- na.omit(df)
df <- xts(df[,2:3] , order.by = df$DATE %>% as.Date)
df$r.dol <- diff(log(df$RI))
View(df)
df$RI.eur <- df$RI * df$ER
df$r.eur <- diff(log(df$RI.eur))
View(df)
shiny::runApp('C:/Users/c4341074/OneDrive/Dokumente/Lehre/Finanzmgmt/StockPickBet')
View(df)
df <- na.omit(df)
mean(df$r.eur)
mean(df$r.dol)
mean(df$r.eur) * 252
mean(df$r.dol) * 252
View(df)
View(ccy)
fx <- ds(user, "USEURO.", "ER", fromDate = "1999-01-04")[[7]]
rownames(fx) <- fx$DATE; fx <- fx[,"ER", drop=F]
fx$r.ER <- c(NA, diff(log(fx$ER)))
df <- ds(user, paste0("FVEUR", c("3M", "6M", "9M", "1Y")), fromDate = "1999-01-04")
library(dplyr); library(RDatastream); library(xts); library(reshape2)
user <- list(username = "DS:ZUTI007", password = "PRICE325")
# US-EUR ------------------------------------------------------------------
fx <- ds(user, "USEURO.", "ER", fromDate = "1999-01-04")[[7]]
rownames(fx) <- fx$DATE; fx <- fx[,"ER", drop=F]
fx$r.ER <- c(NA, diff(log(fx$ER)))
df <- ds(user, paste0("FVEUR", c("3M", "6M", "9M", "1Y")), fromDate = "1999-01-04")
df <- do.call("rbind", df[7, ])
head(df)
d <- reshape(df[,c("DATE", "SYMBOL", "P")], timevar = "SYMBOL", idvar = "DATE", direction = "wide")
rownames(d) <- d$DATE; d$DATE <- NULL
d <- d/100
tau <- c(90, 180, 270, 360)
h <- d[, 1:3, drop=F]; h[,] <- NA; colnames(h) <- c("fs", "h", "r2")
x <- log(tau)
for(i in 1:nrow(h)){
cat('.')
y <- as.numeric(d[i,]) %>% log
mdl <- lm(y ~ x)
h[i,1:2] <- mdl$coefficients
h[i, 3] <- summary(mdl)$r.squared
}
h$fs <- exp(h$fs)
h$h <- h$h + 0.5
plot(h$r2)
summary(h$r2)
plot(h$h, type='l'); abline(0.5,0)
h$h2 <- h$h^2
user <- list(username = "DS:ZUTI007", password = "PRICE325")
df <- ds(user, "S&#38;PCOMP", "RI", fromDate = "1999-01-04")
df <- df[[7]]
ccy <- ds(user, "USEURSP", "ER", fromDate = "1999-01-04")
ccy <- ccy[[7]]
df <- merge(df[,c('DATE', "RI")], ccy[,c("DATE", "ER")], by = "DATE", all=T)
df <- na.omit(df)
df <- xts(df[,2:3] , order.by = df$DATE %>% as.Date)
df$r.dol <- diff(log(df$RI))
df$RI.eur <- df$RI * df$ER
df$r.eur <- diff(log(df$RI.eur))
df <- na.omit(df)
View(df)
View(h)
View(cbind(df, h))
View(merge(df, h))
View(df)
nrow(df)
View(h[-1,])
df$h <- h[-1, 'h']
View(df)
df$inv.eur <- (sign(df$h-0.5)+1)/2
df$inv.us <- 1 - df$r.eur
df$inv.us <- 1 - df$inv.eur
df$inv.eur <- lag(df$inv.eur)
df$inv.us <- lag(df$inv.us)
df$pf <- df$inv.eur * df$r.eur + df$inv.us * df$inv.us
df$pf <- df$inv.eur * df$r.eur + df$inv.us * df$r.dol
mean(df[-1, c("r.eur", "pf"))
colMeans(df[-1, c("r.eur", "pf")) * 252
colMeans(df[-1, c("r.eur", "pf")]) * 252
table(df$pf[-1], df$r.eur[-1])
t.test(df$pf[-1], df$r.eur[-1])
t.test(df$pf[-1]%>% as.numeric, df$r.eur[-1]%>% as.numeric)
t.test(df$pf[-1]%>% as.numeric, df$r.eur[-1]%>% as.numeric, alternative = 'greater')
df$p.pf <- exp(cumsum(df$pf))
df$p.r.eur <- exp(cumsum(df$r.eur))
plot(df[,c('p.pf', 'p.r.eur')])
df$pf[1]
View(df)
0.012258791
1.353089e-02
df$pf[1] <- df$r.dol[1]
df$p.pf <- exp(cumsum(df$pf))
df$p.r.eur <- exp(cumsum(df$r.eur))
plot(df[,c('p.pf', 'p.r.eur')])
10+11+11+13+10+13+8+10+9
95-8-3
library(moments)
library(e1071)
?correl
?cor.test
load("C:/Users/c4341074/OneDrive/Projekte/Market Sentiment/data/ws/ws_countries_19-04-17_h_outlier_adjusted.RData")
View(vix)
library(dplyr)
library(xts)
vix a- data.frame(vix)
vix <- data.frame(vix)
View(vix)
View(vix)
vix$ESP <- NULL
ncol(vix)
colMeans(vix, na.rm=T)/100
rbind(colMeans(vix, na.rm=T)/100,
apply(vix, 2, function(x){sd(x, na.rm=T)})
)
rbind(colMeans(vix, na.rm=T)/100,
apply(vix, 2, function(x){sd(x, na.rm=T)})
) %>% View
rbind(colMeans(vix, na.rm=T)/100,
apply(vix, 2, function(x){sd(x/100, na.rm=T)})
) %>% View
vix <- as.xts(vix)
dvix <- diff(log(vix))
dvix <- data.frame(dvix)
hist(dvix$US)
rbind(colMeans(dvix, na.rm=T)/100,
apply(dvix, 2, function(x){sd(x/100, na.rm=T)})
) %>% View
vix <- as.xts(vix)
vix <- vix/100
dvix <- diff(log(vix))
dvix <- data.frame(dvix)
rbind(colMeans(dvix, na.rm=T),
apply(dvix, 2, function(x){sd(x, na.rm=T)}),
apply(dvix, 2, function(x){skewness(x, na.rm=T)})
) %>% View
dh <- dvix
res <- matrix(NA, 6, ncol(dh))
for(i in 1:ncol(dh)){
res[1,i] <- mean(dh[,i], na.rm=T)
res[2,i] <- sd(dh[,i], na.rm=T)
res[3,i] <- agostino.test(na.trim(dh[,i]))$statistic[1]
res[4,i] <- agostino.test(na.trim(dh[,i]))$p.val
res[5,i] <- anscombe.test(na.trim(dh[,i]))$statistic[1]
res[6,i] <- anscombe.test(na.trim(dh[,i]))$p.val
}
res <- t(res)
res[,4] <- stars.pval(res[,4]) %>% as.character
res[,6] <- stars.pval(as.numeric(res[,6])) %>% as.character
res <- t(res)
library(gtooly)
library(gtools)
res <- matrix(NA, 6, ncol(dh))
for(i in 1:ncol(dh)){
res[1,i] <- mean(dh[,i], na.rm=T)
res[2,i] <- sd(dh[,i], na.rm=T)
res[3,i] <- agostino.test(na.trim(dh[,i]))$statistic[1]
res[4,i] <- agostino.test(na.trim(dh[,i]))$p.val
res[5,i] <- anscombe.test(na.trim(dh[,i]))$statistic[1]
res[6,i] <- anscombe.test(na.trim(dh[,i]))$p.val
}
res <- t(res)
res[,4] <- stars.pval(res[,4]) %>% as.character
res[,6] <- stars.pval(as.numeric(res[,6])) %>% as.character
res <- t(res)
colnames(res) <- colnames(dh)
View(res)
hist(dvix$FRA)
dvix$FRA[dvix$FRA > 1 | dvix$FRA < (-1)] <- NA
hist(dvix$FRA)
skewness(dvix$FRA)
skewness(dvix$FRA, na.rm=T)
dh <- dvix
res <- matrix(NA, 6, ncol(dh))
for(i in 1:ncol(dh)){
res[1,i] <- mean(dh[,i], na.rm=T)
res[2,i] <- sd(dh[,i], na.rm=T)
res[3,i] <- agostino.test(na.trim(dh[,i]))$statistic[1]
res[4,i] <- agostino.test(na.trim(dh[,i]))$p.val
res[5,i] <- anscombe.test(na.trim(dh[,i]))$statistic[1]
res[6,i] <- anscombe.test(na.trim(dh[,i]))$p.val
}
res <- t(res)
res[,4] <- stars.pval(res[,4]) %>% as.character
res[,6] <- stars.pval(as.numeric(res[,6])) %>% as.character
res <- t(res)
colnames(res) <- colnames(dh)
View(res)
library(RDatastream); library(dplyr); library(stringr); library(reshape2)
user <- list(username = "DS:ZUTI007", password = "PRICE325")
ticks <- c("S&PCOMP", "@CSCO")
ticks <- c("S&#38;PCOMP", "@CSCO")
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- do.call("rbind", df[,7])
View(df)
View(df[[7]])
df[,7]
df <- df[[7]]
View(df)
df <- reshape(df[,c("DATE", "SYMBOL", "RI")], timevar = "SYMBOL", idvar = "DATE", direction = "wide")
View(df)
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- df[[7]]
View(df)
View(df)
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df[,7]
df[,6]
View(df)
df[[14]]
View(cbind(df[[7]], df[[14]]))
View(cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
df <- View(cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
library(xts)
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- (cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
df <- xts(df[,2:3], order.by = df$DATE)
colnames(df) <- c("SP500", "CISCO")
View(df)
plot(df)
df$SP500 <- df$SP500 / as.numeric(df$SP500[1])
df$CISCO <- df$CISCO / as.numeric(df$CISCO[1])
plot(df)
lm(df$CISCO ~ df$SP500)
View(df)
View(df)
write.csv(df, file="df.csv")
df$date <- index(df)
write.csv(df, file="df.csv")
View(df)
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- (cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
View(df)
colnames(df)[2:3] <- c("SP500", "CISCO")
write.csv(df, file="df.csv")
c(0.012, 0.005, 0.015)/(0.1^2)
1 + 1.2 * 5
1 + 0.5 * 5
1 + 1.5 * 5
6 + 0.75 * 4
sqrt(0.25^2 - 0.75^2 * 0.04)
0.2^2
0.05/0.04
0.02,/0.04
0.02/0.04
0.4*1.25 + 0.6 * 0.5
8 + 12 - 8
24/40
c(240, 400)/(400+240)
50*2
5-2
5/3
5/2
(5-2)/2
(105-100)-2
55/12
43/12
31/12
19-7
31-7
library(RDatastream); library(dplyr); library(stringr); library(reshape2)
user <- list(username = "DS:ZUTI007", password = "PRICE325")
ticks <- c("S&#38;PCOMP", "@CSCO")
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- reshape(df[,c("DATE", "SYMBOL", "RI")], timevar = "SYMBOL", idvar = "DATE", direction = "wide")
df <- (cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
df <- df[[7]]
df <- xts(df[,2:3], order.by = df$DATE)
colnames(df)[2:3] <- c("SP500", "CISCO")
lm(df$CISCO ~ df$SP500)
ggplot()
ticks <- c("S&#38;PCOMP", "@CSCO")
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- df[[7]]
df <- (cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
View(df)
ticks <- c("S&#38;PCOMP", "@CSCO")
df <- ds(user, ticks, "RI", fromDate = "2017", toDate = "2019", period="D")
df <- (cbind(df[[7]][,c("DATE", "RI")], df[[14]][,c("RI")]))
View(df)
7080.56*1,645
7080.56*1.645
0.8 * 0.01 *10000
2*4*8*2
105 * c(1.01, 1.02, 1.03, 1.04, 1.05)^(-1)
100 * c(1.01, 1.02, 1.03, 1.04, 1.05)^(-1)
100 * c(1.01, 1.02, 1.03, 1.04, 1.05)^(-10)
36/144
144*1.25^2
2/3*0.4+1/3
sqrt(160)
260
sqrt(260)
260 - 1.2^2*^00
260 - 1.2^2*100
0.4^2 * 100
1.2^2*100
260-144
11/3
3+3+4
4+4+3
8/20
0.4^2
0.2*1.4
0.28^2
0.16-0.0784
sqrt(0.0816)
6/8
0.75*0.2
0.15^2*0.2^2+0.1^2
sqrt(0.0109)
0./5^2*0.2^2+0.1^2
0./5^2*0.2^2+0.1^2
0.75^2*0.2^2+0.1^2
sqrt(0.0325)
0.75*0.6+0.4*1.4
0.4^2*0.4^2 + 0.6^2*0.0325
sqrt(0.0373)
0.4 - 0.1931
32*500000
32*500
0.025*16
0.035*16
3/1.5
560/400
43-21
0.15^2 + 0.1^2
sqrt(0.0325)
2+1.4*8
(13.2 - 2)/40
(8-2)/18.03
sqrt(0.1803^2 + 0.4^2)
sqrt(0.6^2*0.1803^2 + 0.4^2 * 0.4^2)
0.6*8 + 13.2 * 0.4
(10.08 -2)/ 19.3
0.42 - 0.28
0.42 - 0.33
11 + 7 + 8  + 17 + 12
setwd("~/ivol")
110/100
check()
library(devtools)
check()
install.packages("'qpdf'")
install.packages("qpdf")
check()
build()
check()
install.packages("qpdf")
library(qpdf)
check()
install.packages("~/ivol_0.0-1.tar.gz", repos = NULL, type = "source")
use_data(ivol_Atm)
use_data(ivol_atm)
?data
mtcars
ivol_atm
data("ivol_atm.RData", package = "ivol")
data("ivol_atm", package = "ivol")
data(ivol_atm", package = "ivol")
data(ivol_atm, package = "ivol")
load("~/ivol/data/ivol_atm.RData")
View(atm)
library("ivol")
ih <- ihurst(atm)
?ihurst
tau <- colnames(atm)
tau
library(stringr)
str_remove(tau, "T")
tau <- str_remove(tau, "T")
tau <- as.numeric(tau)
tau
ih <- ihurst(atm, tau)
mdl <- ih
ih <- mdl$h
plot(ih)
plot(mdl)
